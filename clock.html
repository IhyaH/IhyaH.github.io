<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数码管时钟</title>
    <!-- 引入Tailwind CSS用于快速构建界面 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入一个具有科技感的字体 'Orbitron' -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* 为整个页面设置科技感字体和文字辉光效果 */
        body {
            font-family: 'Orbitron', 'PingFang SC', 'Microsoft YaHei', sans-serif; /* 添加中文字体备选 */
            text-shadow: 0 0 10px rgba(100, 181, 246, 0.6), 0 0 20px rgba(100, 181, 246, 0.4);
            /* 使用等宽数字，作为第一层保障 */
            font-variant-numeric: tabular-nums;
        }
        /* 时间分隔符的闪烁动画 */
        .separator {
            animation: blink 1s infinite;
        }
        /* 调整透明度，使闪烁效果更温和 */
        @keyframes blink {
            50% {
                opacity: 0.6;
            }
        }
    </style>
</head>
<body class="bg-gray-900 text-blue-300 flex items-center justify-center min-h-screen select-none">
    <div class="text-center p-4">
        <!-- 日期和星期显示 -->
        <div id="date" class="text-2xl md:text-4xl mb-4 opacity-80 transition-opacity duration-500"></div>
        
        <!-- 主要时钟显示区域 -->
        <div class="flex items-center justify-center text-7xl md:text-9xl font-bold tracking-widest">
            <!-- 为每个时间单元（时、分、秒）设置固定宽度和居中对齐，彻底防止抖动 -->
            <span id="hours" class="inline-block text-center w-40 md:w-72">00</span>
            <span class="separator mx-2 md:mx-4">:</span>
            <span id="minutes" class="inline-block text-center w-40 md:w-72">00</span>
            <span class="separator mx-2 md:mx-4">:</span>
            <span id="seconds" class="inline-block text-center w-40 md:w-72">00</span>
        </div>

        <!-- 温馨问候语将由一言API提供 -->
        <div id="greeting" class="text-xl md:text-2xl mt-6 opacity-70 transition-opacity duration-500 min-h-[30px]"></div>
    </div>

    <script>
        // 获取页面上的元素
        const hoursEl = document.getElementById('hours');
        const minutesEl = document.getElementById('minutes');
        const secondsEl = document.getElementById('seconds');
        const dateEl = document.getElementById('date');
        const greetingEl = document.getElementById('greeting');

        // --- 新增功能：从“一言”API获取句子 ---
        async function fetchAndSetGreeting() {
            try {
                // 向一言API发送请求
                const response = await fetch('https://v1.hitokoto.cn/?encode=json&charset=utf-8');
                if (!response.ok) {
                    throw new Error('网络响应错误，无法获取一言。');
                }
                const data = await response.json();
                
                // 格式化句子并显示
                const from = data.from_who || data.from || '佚名';
                greetingEl.textContent = `${data.hitokoto} —— ${from}`;
                greetingEl.style.opacity = '0.7';

            } catch (error) {
                console.error('获取一言失败:', error);
                // 如果API请求失败，显示一条备用句子
                greetingEl.textContent = '生活，就是心怀最大的希望，尽最大的努力。';
            }
        }

        // 更新时钟的函数
        function updateClock() {
            const now = new Date();

            // 格式化小时、分钟和秒，确保是两位数
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');

            // 更新时间显示
            hoursEl.textContent = hours;
            minutesEl.textContent = minutes;
            secondsEl.textContent = seconds;

            // 格式化日期和星期
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const week = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'][now.getDay()];
            dateEl.textContent = `${year}年${month}月${day}日 ${week}`;
        }

        // --- 逻辑执行 ---
        
        // 1. 每秒更新一次时钟
        setInterval(updateClock, 1000);

        // 2. 每30秒获取一次新的“一言”句子
        setInterval(fetchAndSetGreeting, 30000);

        // 3. 页面加载时立即执行一次，避免初始延迟
        updateClock();
        fetchAndSetGreeting();
    </script>
</body>
</html>
